function centerHeader() {
    var e = $("header h1").height() / 2,
        a = $("header"),
        o = a.offset().top - e;
    o > 0 ? $("header").css("margin-top", -e + "px") : $("header").css("margin-top", 0)
}
function loadPanorama() {
    var e = $("#background");
    new PhotoSphereViewer({
        container: e[0],
        panorama: e.data("panorama"),
        usexmpdata: !! parseInt(e.data("xmp")),
        default_position: {
            "long": e.data("long") + "deg",
            lat: e.data("lat") + "deg"
        },
        onready: function() {
            $("#loading").fadeOut(500), displayCredits(), displayLinks()
        },
        navbar: true,
        allow_user_interactions: true
    })
}
function displayCredits() {
    $("#loading-message").fadeOut(400, function() {
        $("#credits").fadeIn()
    })
}
function displayLinks() {
    var e = $("header nav").show(),
        a = e.height(),
        o = $("header");
    o.height(o.height()), e.hide(), e.css({
        position: "absolute",
        bottom: -a + "px"
    }).fadeIn({
        duration: 500,
        step: function(o) {
            e.css("bottom", -(a * (1 - o)) + "px")
        },
        complete: function() {
            e.css("position", "static"), o.height("auto")
        }
    })
}
function toggleAbout() {
    return $("#about").slideToggle(500), !1
}
function toggleDownload() {
    return $("#download").slideToggle(500), !1
}
$(document).ready(function() {
    $("header nav").hide(), $("#about").hide(), $("#about-link").click(toggleAbout), $("#download").hide(), $("#download-link").click(toggleDownload), $("#credits").hide(), $("#loading-message").show(), centerHeader(), $(window).resize(centerHeader), setTimeout(loadPanorama, 50)
});


function changePanorama(newImage) {
    var e = $("#background");
    new PhotoSphereViewer({
        container: e[0],
        panorama: newImage,
        navbar: true,
        usexmpdata: !! parseInt(e.data("xmp")),
        default_position: {
            "long": e.data("long") + "deg",
            lat: e.data("lat") + "deg"
        },
        onready: function() {
            $("#loading").fadeOut(500), displayCredits(), displayLinks()
        },
        navbar: true,
        allow_user_interactions: true
    })
}